{% extends "base.njk" %}

{% block title %}All Shows{% endblock %}

{% block content %}
<p>Total shows: {{ shows | length }}</p>
<h1>All Shows</h1>
<div class="table-wrapper">
<table>
  <thead>
    <tr>
      <th>Artist</th>
      <th>Date</th>
      <th>Location</th>
      <th>Length</th>
      <th>Format</th>
      <th>Type</th>
      <th>Source</th>
      <th>Taper(s)</th>
      <th>Images</th>
      <th>Page</th>
    </tr>
  </thead>
  <tbody>
    {% for show in shows | sort(attribute='startDateUnix') | reverse %}
    <tr>
      <td>
        {% if show.bands %}
          {{ show.bands | join(", ") }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        {% if show.startDateUnix %}
          {{ show.startDateUnix | date("yyyy-MM-dd") }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        {% if show.location %}
          {{ show.location.city or "" }}{% if show.location.state %}, {{ show.location.state }}{% endif %}, {{ show.location.country or "" }}<br>
          {{ show.location.venue or "" }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        {% if show.specs and show.specs.length %}
          {{ show.specs.length | formatTime }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        {% if show.specs and show.specs.sourceDetail %}
          {{ show.specs.sourceDetail.fileFormat or "â€”" }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        {% if show.specs and show.specs.sourceDetail %}
          {{ show.specs.sourceDetail.recordingType or "â€”" }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>{{ show.source or "â€”" }}</td>
      <td>
        {% if show.tapers %}
          {{ show.tapers | join(", ") }}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        {% if show.images %}
          {% for img in show.images | slice(0, 4) %}
            <img src="https://drive.google.com/thumbnail?id={{ img.externalId }}&sz=w40" alt="thumb" width="40" height="auto" style="margin-right: 2px;">
          {% endfor %}
        {% else %}
          â€”
        {% endif %}
      </td>
      <td>
        <a href="/shows/{{ show.fileSlug }}/" title="View">ðŸ”—</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}